
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brent Simmons is Not Wrong - theory.so</title>
  <meta name="author" content="David E. Wheeler">

  
  <meta name="description" content="Brent Simmons: Database people are already gasping for air, because they know what’s coming.
Instead of creating a separate table for attachment &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://theory.so/theory/2014/01/10/brent-simmons-is-not-wrong">
  <link href="/favicon.ico" rel="icon">
  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="theory.so" type="application/atom+xml">
  

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43606412-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <h2><a href="/"><img src="/images/logo.png" alt="≡" /></a></h2>
  <h1><a href="/">theory.so</a></h1>
</hgroup>

</header>
  <nav role="navigation">
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:theory.so" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="http://pgxn.org/user/theory">PGXN</a></li>
  <li><a href="/about/">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>




  







<article class="hentry" role="article" data-linklog>
  
  <header>
    <h1 class="entry-title">

<a href="http://inessential.com/2014/01/02/vesper_sync_diary_7_audibles">Brent Simmons is Not Wrong</a>
<span class='linklog-marker'>→</span>
</h1>

    
      <p class="meta">
        








  


<time datetime="2014-01-10T11:02:00-08:00" pubdate data-updated="true">10 January 2014</time>
        
         &bull; <a rel="bookmark" href="/theory/2014/01/10/brent-simmons-is-not-wrong/">§</a>
      </p>
    
  </header>



  <div class="entry-content"><p>Brent Simmons:</p>

<blockquote><p>Database people are already gasping for air, because they know what’s coming.
Instead of creating a separate table for attachment metadata, I created an
attachments column in the notes table and just encoded the attachment
metadata there.</p>

<p>On iOS it uses Core Data’s built-in object archiving feature. On the server
it’s stored as JSON.</p>

<p>This is wrong, surely; it’s not how to do this. Except, in this case, it is.
Incomplete object graphs are wrong; inefficient and slower syncing with more
complex server-side code is also wrong.</p>

<p>This is <em>less wrong than the alternatives.</em></p></blockquote>

<p>Some database folks might be gasping for air, but not those of us steeped in
relational theory. In <em><a href="http://www.amazon.com/Database-Depth-Relational-Theory-Practitioners/dp/0596100124/justatheory-20">Database in Depth</a></em>, relational theorist <a href="http://en.wikipedia.org/wiki/Christopher_J._Date">C.J. Date</a>
poses a question:</p>

<p><a href="http://www.amazon.com/Database-Depth-Relational-Theory-Practitioners/dp/0596100124/justatheory-20"><img class="right" src="http://ecx.images-amazon.com/images/I/41Z2NjCztCL.jpg" width="300" title="“Database in Depth,” by C.J. Date" ></a></p>

<blockquote><p>In Chapter 1, I said that 1NF meant that every tuple in every relation
contains just a single value (of the appropriate type, of course) in every
attribute position&mdash;and it’s usual to add that those “single values” are
supposed to be atomic. But this latter requirement raises the obvious
question: what does it mean for data to be atomic?</p>

<p>Well, on page 6 of the book mentioned earlier, Codd defines atomic data as
data that “cannot be decomposed into smaller pieces by the DBMS (excluding
certain special functions).” But even if we ignore that parenthetical
exclusion, this definition is a trifle puzzling, and not very precise. For
example, what about character strings? Are character strings atomic? Every
product I know provides several operators on such strings—LIKE, SUBSTR
(substring), “||” (concatenate), and so on—that clearly rely on the fact that
character strings in general can be decomposed by the DBMS. So are those
strings atomic? What do you think?</p></blockquote>

<p>The whole book is worth a read, especially the first four chapters, as it
does an excellent job of dispelling the myth that complex data types are
verboten in a properly normalized relational model. Another gem:</p>

<blockquote><p>But I could have used any number of different examples to make my point: I
could have shown attributes (and therefore domains) that contained arrays; or
bags; or lists; or photographs; or audio or video recordings; or X rays; or
fingerprints; or XML documents; or any other kind of value, “atomic” or
“nonatomic,” that you might care to think of. Attributes, and therefore
domains, can contain anything (any values, that is). All of which goes a long
way, incidentally, toward explaining why a true “object/relational” system
would be nothing more nor less than a true relational system—which is to say,
a system that supports the relational model, with all that such support
entails.</p></blockquote>

<p>This is exactly why PostgreSQL offers <a href="http://www.postgresql.org/docs/current/static/arrays.html">array</a>, <a href="http://www.postgresql.org/docs/current/static/datatype-xml.html">XML</a>, and <a href="http://www.postgresql.org/docs/current/static/datatype-json.html">JSON</a> data types:
because sometimes, they are exactly what you need to properly model your
system.</p>

<p>So you go, Brent, you&rsquo;re doing it exactly right.</p>
</div>


  <footer>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://theory.so/theory/2014/01/10/brent-simmons-is-not-wrong/" data-via="theory" data-counturl="http://theory.so/theory/2014/01/10/brent-simmons-is-not-wrong/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="false" data-layout="button_count" data-width="200" data-show-faces="false"></div>
  
  
  <span class="adn-post"><a href="https://alpha.app.net/intent/post/?url=/theory/2014/01/10/brent-simmons-is-not-wrong/&text=theory.so: “Brent Simmons is Not Wrong”" class="adn-button" target="_blank" data-type="share" data-width="132" data-height="20" data-text="theory.so: “Brent Simmons is Not Wrong”" data-url="/theory/2014/01/10/brent-simmons-is-not-wrong/" >Share on App.net</a></span>
  <script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//d2zh9g63fcvyrq.cloudfront.net/adn.js";fjs.parentNode.insertBefore(js,fjs);}}(document, "script", "adn-button-js"));</script>
  
</div>

    
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn"><a href="/about" title="About the author (David E. Wheeler)" rel="author">David E. Wheeler</a></span></span>

      








  


<time datetime="2014-01-10T11:02:00-08:00" pubdate data-updated="true">10 January 2014</time>
      

<span class="categories">
  
    <a class='category' href='/categories/theory/'>theory</a>
  
</span>


    </p>
          <div class="follow_buttons_byline">

  <a href="http://twitter.com/theory" class="twitter-follow-button" data-show-count="true">Follow @theory</a>


   <a href="https://alpha.app.net/intent/follow/?user_id=%40theory" class="adn-button" target="_blank" data-type="follow" data-width="277" data-height="20" data-user-id="@theory" data-show-count="1" data-show-username="1">Follow me on App.net</a>
<script src="//d2zh9g63fcvyrq.cloudfront.net/adn.js"></script>

      </div>

    <p class="meta">
      
        <a class="basic-alignment left" href="/sqitch/2014/01/09/sqitch-on-target/" title="Previous Post: Sqitch on Target">&laquo; Sqitch on Target</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 – David E. Wheeler –
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> –
  <a href="/atom.xml" title="Subscribe to theory.com">Feed</a>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'theoryso';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://theory.so/theory/2014/01/10/brent-simmons-is-not-wrong/';
        var disqus_url = 'http://theory.so/theory/2014/01/10/brent-simmons-is-not-wrong/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
